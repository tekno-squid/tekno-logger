<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tekno Logger - Dashboard</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>üìã Tekno Logger</h1>
                </div>
                <div class="header-right">
                    <button class="theme-toggle" id="theme-toggle" title="Toggle dark mode">
                        üåô
                    </button>
                    <div class="status-indicator" id="service-status">
                        <span class="status-dot"></span>
                        <span class="status-text">Checking...</span>
                    </div>
                    <button class="logout-btn" id="logout-btn" style="display: none;">
                        üö™ Logout
                    </button>
                </div>
            </div>
        </header>

        <nav class="tabs">
            <button class="tab-button active" data-tab="dashboard">
                <span class="tab-icon">üìä</span>
                Dashboard
            </button>
            <button class="tab-button" data-tab="search">
                <span class="tab-icon">üîç</span>
                Search Logs
            </button>
            <button class="tab-button" data-tab="projects">
                <span class="tab-icon">üìÅ</span>
                Projects
            </button>
            <button class="tab-button" data-tab="testing">
                <span class="tab-icon">üß™</span>
                Testing
            </button>
            <button class="tab-button" data-tab="admin">
                <span class="tab-icon">‚öôÔ∏è</span>
                Admin
            </button>
        </nav>

        <main>
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="stats-section">
                        <h3>Service Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-header">
                                    <h4>Error Rate</h4>
                                    <span class="stat-period">(Last Hour)</span>
                                </div>
                                <div class="stat-value" id="error-rate">--</div>
                                <div class="stat-change" id="error-rate-change">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-header">
                                    <h4>Total Events</h4>
                                    <span class="stat-period">(Last Hour)</span>
                                </div>
                                <div class="stat-value" id="total-events">--</div>
                                <div class="stat-change" id="total-events-change">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-header">
                                    <h4>Active Projects</h4>
                                    <span class="stat-period">(Total)</span>
                                </div>
                                <div class="stat-value" id="total-projects">--</div>
                                <div class="stat-change" id="projects-change">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-header">
                                    <h4>Maintenance</h4>
                                    <span class="stat-period">(Last Run)</span>
                                </div>
                                <div class="stat-value" id="last-maintenance">--</div>
                                <div class="stat-change" id="maintenance-status">--</div>
                            </div>
                        </div>
                    </div>

                    <div class="recent-section">
                        <div class="section-header">
                            <h3>Recent Errors</h3>
                            <button class="refresh-btn" id="refresh-errors" title="Refresh">üîÑ</button>
                        </div>
                        <div class="recent-errors" id="recent-errors-list">
                            <div class="loading">Loading recent errors...</div>
                        </div>
                    </div>

                    <div class="fingerprints-section">
                        <div class="section-header">
                            <h3>Top Error Fingerprints</h3>
                            <select id="fingerprint-period">
                                <option value="1h">Last Hour</option>
                                <option value="24h" selected>Last 24 Hours</option>
                                <option value="7d">Last 7 Days</option>
                            </select>
                        </div>
                        <div class="fingerprints-list" id="top-fingerprints">
                            <div class="loading">Loading fingerprints...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Tab -->
            <div id="search" class="tab-content">
                <div class="search-container">
                    <div class="search-form">
                        <div class="search-filters">
                            <div class="filter-row">
                                <div class="filter-group">
                                    <label for="search-project">Project:</label>
                                    <select id="search-project">
                                        <option value="">All Projects</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="search-level">Level:</label>
                                    <select id="search-level">
                                        <option value="">All Levels</option>
                                        <option value="fatal">Fatal</option>
                                        <option value="error">Error</option>
                                        <option value="warn">Warning</option>
                                        <option value="info">Info</option>
                                        <option value="debug">Debug</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="search-env">Environment:</label>
                                    <select id="search-env">
                                        <option value="">All Environments</option>
                                        <option value="production">Production</option>
                                        <option value="staging">Staging</option>
                                        <option value="development">Development</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-row">
                                <div class="filter-group search-text-group">
                                    <label for="search-query">Message:</label>
                                    <input type="text" id="search-query" placeholder="Search in log messages...">
                                </div>
                                <div class="filter-group">
                                    <label for="search-time-range">Time Range:</label>
                                    <select id="search-time-range">
                                        <option value="1h">Last Hour</option>
                                        <option value="24h" selected>Last 24 Hours</option>
                                        <option value="7d">Last 7 Days</option>
                                        <option value="custom">Custom Range</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <button id="search-btn" class="search-button">üîç Search</button>
                                    <button id="clear-search-btn" class="clear-button">Clear</button>
                                </div>
                            </div>
                            <div class="filter-row custom-time-range" id="custom-time-range" style="display: none;">
                                <div class="filter-group">
                                    <label for="search-start-time">From:</label>
                                    <input type="datetime-local" id="search-start-time">
                                </div>
                                <div class="filter-group">
                                    <label for="search-end-time">To:</label>
                                    <input type="datetime-local" id="search-end-time">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="search-results-container">
                        <div class="search-results-header">
                            <div class="results-info">
                                <span id="search-results-count">Enter search criteria above</span>
                            </div>
                            <div class="results-controls">
                                <select id="results-per-page">
                                    <option value="25">25 per page</option>
                                    <option value="50" selected>50 per page</option>
                                    <option value="100">100 per page</option>
                                </select>
                            </div>
                        </div>
                        <div class="search-results" id="search-results">
                            <div class="search-placeholder">
                                <div class="placeholder-icon">üîç</div>
                                <p>Use the filters above to search through your logs</p>
                                <p class="placeholder-hint">Pro tip: Leave fields empty to search all values</p>
                            </div>
                        </div>
                        <div class="pagination" id="search-pagination" style="display: none;">
                            <button id="prev-page" disabled>‚Üê Previous</button>
                            <span id="page-info">Page 1 of 1</span>
                            <button id="next-page" disabled>Next ‚Üí</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Projects Tab -->
            <div id="projects" class="tab-content">
                <div class="projects-container">
                    <div class="projects-header">
                        <div class="header-left">
                            <h3>Project Management</h3>
                            <p>Manage your logging projects and view their configurations</p>
                        </div>
                        <div class="header-right">
                            <button id="new-project-btn" class="primary-button">
                                <span class="button-icon">‚ûï</span>
                                New Project
                            </button>
                        </div>
                    </div>

                    <div class="projects-list" id="projects-list">
                        <div class="loading">Loading projects...</div>
                    </div>
                </div>

                <!-- New Project Modal -->
                <div class="modal" id="new-project-modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4>Create New Project</h4>
                            <button class="modal-close" id="close-new-project">&times;</button>
                        </div>
                        <form id="new-project-form">
                            <div class="form-group">
                                <label for="project-name">Project Name:</label>
                                <input type="text" id="project-name" required placeholder="My Application">
                            </div>
                            <div class="form-group">
                                <label for="project-slug">Project Slug:</label>
                                <input type="text" id="project-slug" required placeholder="my-app"
                                    pattern="^[a-z0-9]+(-[a-z0-9]+)*$">
                                <small>Lowercase letters, numbers, and hyphens only</small>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="project-retention">Retention (days):</label>
                                    <input type="number" id="project-retention" value="3" min="1" max="30">
                                </div>
                                <div class="form-group">
                                    <label for="project-rate-limit">Rate Limit (per minute):</label>
                                    <input type="number" id="project-rate-limit" value="5000" min="1">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="cancel-new-project" class="secondary-button">Cancel</button>
                                <button type="submit" class="primary-button">Create Project</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Testing Tab -->
            <div id="testing" class="tab-content">
                <div class="testing-container">
                    <div class="testing-header">
                        <h3>Logging Service Testing</h3>
                        <p>Test and compare different logging services with sample data</p>
                    </div>

                    <div class="testing-grid">
                        <!-- Service Status -->
                        <div class="testing-section full-width">
                            <h4>Available Services</h4>
                            <div class="service-status-grid" id="service-status-grid">
                                <div class="loading">Loading service configuration...</div>
                            </div>
                        </div>

                        <!-- Test Scenarios -->
                        <div class="testing-section">
                            <h4>Quick Test Scenarios</h4>
                            <div class="scenario-buttons">
                                <button class="scenario-btn" data-scenario="info">
                                    <span class="scenario-icon">‚ÑπÔ∏è</span>
                                    <span class="scenario-label">Info Log</span>
                                </button>
                                <button class="scenario-btn" data-scenario="warning">
                                    <span class="scenario-icon">‚ö†Ô∏è</span>
                                    <span class="scenario-label">Warning</span>
                                </button>
                                <button class="scenario-btn" data-scenario="error">
                                    <span class="scenario-icon">‚ùå</span>
                                    <span class="scenario-label">Error</span>
                                </button>
                                <button class="scenario-btn" data-scenario="exception">
                                    <span class="scenario-icon">üí•</span>
                                    <span class="scenario-label">Exception</span>
                                </button>
                                <button class="scenario-btn" data-scenario="performance">
                                    <span class="scenario-icon">‚è±Ô∏è</span>
                                    <span class="scenario-label">Performance</span>
                                </button>
                                <button class="scenario-btn" data-scenario="custom">
                                    <span class="scenario-icon">‚úèÔ∏è</span>
                                    <span class="scenario-label">Custom</span>
                                </button>
                            </div>
                        </div>

                        <!-- Custom Log Builder -->
                        <div class="testing-section">
                            <h4>Custom Log Builder</h4>
                            <div class="log-builder">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="test-level">Level:</label>
                                        <select id="test-level">
                                            <option value="info">Info</option>
                                            <option value="warn">Warning</option>
                                            <option value="error">Error</option>
                                            <option value="fatal">Fatal</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="test-source">Source:</label>
                                        <input type="text" id="test-source" value="test-dashboard"
                                            placeholder="Source component">
                                    </div>
                                    <div class="form-group">
                                        <label for="test-env">Environment:</label>
                                        <select id="test-env">
                                            <option value="development">Development</option>
                                            <option value="staging">Staging</option>
                                            <option value="production">Production</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="test-message">Message:</label>
                                    <input type="text" id="test-message" placeholder="Enter log message..."
                                        value="Test log message">
                                </div>
                                <div class="form-group">
                                    <label for="test-context">Context (JSON):</label>
                                    <textarea id="test-context" placeholder='{"key": "value", "user_id": "123"}'>{
  "test_type": "manual",
  "timestamp": "2025-10-20T19:00:00Z",
  "user_agent": "Test Dashboard"
}</textarea>
                                </div>

                                <!-- Service Selection -->
                                <div class="service-selection">
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                        <h5>Send to Services:</h5>
                                        <div style="display: flex; gap: 0.5rem;">
                                            <button type="button" id="select-all-services" class="small-button">Select
                                                All</button>
                                            <button type="button" id="select-none-services"
                                                class="small-button">None</button>
                                        </div>
                                    </div>
                                    <div class="service-checkboxes" id="service-checkboxes">
                                        <!-- Populated by JavaScript -->
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button id="send-test-log" class="primary-button">
                                        üì§ Send Test Log
                                    </button>
                                    <button id="send-batch-logs" class="secondary-button">
                                        üì¶ Send Batch (10 logs)
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Test Results -->
                        <div class="testing-section full-width">
                            <h4>Test Results</h4>
                            <div class="results-container" id="test-results">
                                <div class="results-placeholder">
                                    <p>Send a test log to see results here</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Tab -->
            <div id="admin" class="tab-content">
                <div class="admin-container">
                    <div class="admin-header">
                        <h3>System Administration</h3>
                        <p>Monitor and control system maintenance and health</p>
                    </div>

                    <div class="admin-grid">
                        <div class="admin-section">
                            <h4>Maintenance Control</h4>
                            <div class="maintenance-status" id="maintenance-status-section">
                                <div class="loading">Loading maintenance status...</div>
                            </div>
                            <div class="maintenance-actions">
                                <button id="trigger-maintenance" class="action-button">
                                    <span class="button-icon">üîß</span>
                                    Run Maintenance
                                </button>
                                <button id="trigger-purge" class="action-button">
                                    <span class="button-icon">üóëÔ∏è</span>
                                    Run Purge
                                </button>
                            </div>
                        </div>

                        <div class="admin-section">
                            <h4>System Health</h4>
                            <div class="health-status" id="health-status-section">
                                <div class="loading">Loading health status...</div>
                            </div>
                            <div class="health-actions">
                                <button id="refresh-health" class="action-button">
                                    <span class="button-icon">üîÑ</span>
                                    Refresh Status
                                </button>
                            </div>
                        </div>

                        <div class="admin-section">
                            <h4>Service Configuration</h4>
                            <div class="config-display" id="config-display">
                                <div class="loading">Loading configuration...</div>
                            </div>
                            <div class="config-actions">
                                <button id="refresh-config" class="action-button">
                                    <span class="button-icon">‚öôÔ∏è</span>
                                    Refresh Config
                                </button>
                                <button id="clear-config-cache" class="action-button">
                                    <span class="button-icon">üßπ</span>
                                    Clear Cache
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="login-modal-overlay">
        <div class="modal login-modal">
            <div class="modal-header">
                <h2>Login</h2>
            </div>
            <div class="modal-content">
                <form id="login-form" class="login-form">
                    <div class="form-group">
                        <label for="admin-token">Password</label>
                        <input type="password" id="admin-token" name="adminToken" placeholder="Enter password"
                            autocomplete="current-password" required>
                    </div>
                    <div class="login-actions">
                        <button type="submit" class="btn btn-primary" id="login-submit">
                            <span class="btn-text">Login</span>
                        </button>
                    </div>
                </form>
                <div class="login-error" id="login-error" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>

</html>